!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(Me){"use strict";Me.defineMode("javascript",function(e,l){var n,a,u=e.indentUnit,f=l.statementIndent,o=l.jsonld,c=l.json||o,s=l.typescript,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:n,break:n,continue:n,new:n,delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(s){var c={type:"variable",style:"variable-3"},l={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:c,number:c,bool:c,any:c};for(var u in l)o[u]=l[u]}return o}(),p=/[+\-*&%=<>!?|~^]/,v=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,r){return n=e,a=r,t}function y(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=(a=r,function(e,t){var r,n=!1;if(o&&"@"==e.peek()&&e.match(v))return t.tokenize=y,m("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=a||n);)n=!n&&"\\"==r;return n||(t.tokenize=y),m("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),m("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),m("number","number");if("/"==r)return e.eat("*")?(t.tokenize=b)(e,t):e.eat("/")?(e.skipToEnd(),m("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.eatWhile(/[gimy]/),m("regexp","string-2")):(e.eatWhile(p),m("operator","operator",e.current()));if("`"==r)return(t.tokenize=k)(e,t);if("#"==r)return e.skipToEnd(),m("error","error");if(p.test(r))return e.eatWhile(p),m("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var a,n=e.current(),i=d.propertyIsEnumerable(n)&&d[n];return i&&"."!=t.lastType?m(i.type,i.style,n):m("variable","variable",n)}function b(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=y;break}n="*"==r}return m("comment","comment")}function k(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=y;break}n=!n&&"\\"==r}return m("quasi","string-2",e.current())}var x="([{}])";function i(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var n=0,a=!1,i=r-1;0<=i;--i){var o=e.string.charAt(i),c=x.indexOf(o);if(0<=c&&c<3){if(!n){++i;break}if(0==--n)break}else if(3<=c&&c<6)++n;else if(/[$\w]/.test(o))a=!0;else if(a&&!n){++i;break}}a&&!n&&(t.fatArrowAt=i)}}var h={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function g(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function w(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var j={state:null,column:null,marked:null,cc:null};function M(){for(var e=arguments.length-1;0<=e;e--)j.cc.push(arguments[e])}function V(){return M.apply(null,arguments),!0}function r(r){function e(e){for(var t=e;t;t=t.next)if(t.name==r)return!0;return!1}var t=j.state;if(t.context){if(j.marked="def",e(t.localVars))return;t.localVars={name:r,next:t.localVars}}else{if(e(t.globalVars))return;l.globalVars&&(t.globalVars={name:r,next:t.globalVars})}}var t={name:"this",next:{name:"arguments"}};function E(){j.state.context={prev:j.state.context,vars:j.state.localVars},j.state.localVars=t}function z(){j.state.localVars=j.state.context.vars,j.state.context=j.state.context.prev}function I(r,n){var e=function(){var e=j.state,t=e.indented;"stat"==e.lexical.type&&(t=e.lexical.indented),e.lexical=new g(t,j.stream.column(),r,null,e.lexical,n)};return e.lex=!0,e}function T(){var e=j.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function A(r){return function e(t){return t==r?V():";"==r?M():V(e)}}function C(e,t){return"var"==e?V(I("vardef",t.length),Z,A(";"),T):"keyword a"==e?V(I("form"),$,C,T):"keyword b"==e?V(I("form"),C,T):"{"==e?V(I("}"),R,T):";"==e?V():"if"==e?("else"==j.state.lexical.info&&j.state.cc[j.state.cc.length-1]==T&&j.state.cc.pop()(),V(I("form"),$,C,T,ae)):"function"==e?V(fe):"for"==e?V(I("form"),ie,C,T):"variable"==e?V(I("stat"),D):"switch"==e?V(I("form"),$,I("}","switch"),A("{"),R,T,T):"case"==e?V($,A(":")):"default"==e?V(A(":")):"catch"==e?V(I("form"),E,A("("),se,A(")"),C,T,z):"module"==e?V(I("form"),E,ye,z,T):"class"==e?V(I("form"),de,T):"export"==e?V(I("form"),be,T):"import"==e?V(I("form"),ke,T):M(I("stat"),$,A(";"),T)}function $(e){return O(e,!1)}function q(e){return O(e,!0)}function O(e,t){if(j.state.fatArrowAt==j.stream.start){var r=t?B:_;if("("==e)return V(E,I(")"),L(ee,")"),T,A("=>"),r,z);if("variable"==e)return M(E,ee,A("=>"),r,z)}var n=t?N:S;return h.hasOwnProperty(e)?V(n):"function"==e?V(fe,n):"keyword c"==e?V(t?P:W):"("==e?V(I(")"),W,je,A(")"),T,n):"operator"==e||"spread"==e?V(t?q:$):"["==e?V(I("]"),ge,T,n):"{"==e?Q(G,"}",null,n):"quasi"==e?M(H,n):V()}function W(e){return e.match(/[;\}\)\],]/)?M():M($)}function P(e){return e.match(/[;\}\)\],]/)?M():M(q)}function S(e,t){return","==e?V($):N(e,t,!1)}function N(e,t,r){var n=0==r?S:N,a=0==r?$:q;return"=>"==t?V(E,r?B:_,z):"operator"==e?/\+\+|--/.test(t)?V(n):"?"==t?V($,A(":"),a):V(a):"quasi"==e?M(H,n):";"!=e?"("==e?Q(q,")","call",n):"."==e?V(F,n):"["==e?V(I("]"),W,A("]"),T,n):void 0:void 0}function H(e,t){return"quasi"!=e?M():"${"!=t.slice(t.length-2)?V(H):V($,U)}function U(e){if("}"==e)return j.marked="string-2",j.state.tokenize=k,V(H)}function _(e){return i(j.stream,j.state),M("{"==e?C:$)}function B(e){return i(j.stream,j.state),M("{"==e?C:q)}function D(e){return":"==e?V(T,C):M(S,A(";"),T)}function F(e){if("variable"==e)return j.marked="property",V()}function G(e,t){return"variable"==e||"keyword"==j.style?(j.marked="property",V("get"==t||"set"==t?J:K)):"number"==e||"string"==e?(j.marked=o?"property":j.style+" property",V(K)):"jsonld-keyword"==e?V(K):"["==e?V($,A("]"),K):void 0}function J(e){return"variable"!=e?M(K):(j.marked="property",V(fe))}function K(e){return":"==e?V(q):"("==e?M(fe):void 0}function L(r,n){function a(e){if(","==e){var t=j.state.lexical;return"call"==t.info&&(t.pos=(t.pos||0)+1),V(r,a)}return e==n?V():V(A(n))}return function(e){return e==n?V():M(r,a)}}function Q(e,t,r){for(var n=3;n<arguments.length;n++)j.cc.push(arguments[n]);return V(I(t,r),L(e,t),T)}function R(e){return"}"==e?V():M(C,R)}function X(e){if(s&&":"==e)return V(Y)}function Y(e){if("variable"==e)return j.marked="variable-3",V()}function Z(){return M(ee,X,re,ne)}function ee(e,t){return"variable"==e?(r(t),V()):"["==e?Q(ee,"]"):"{"==e?Q(te,"}"):void 0}function te(e,t){return"variable"!=e||j.stream.match(/^\s*:/,!1)?("variable"==e&&(j.marked="property"),V(A(":"),ee,re)):(r(t),V(re))}function re(e,t){if("="==t)return V(q)}function ne(e){if(","==e)return V(Z)}function ae(e,t){if("keyword b"==e&&"else"==t)return V(I("form","else"),C,T)}function ie(e){if("("==e)return V(I(")"),oe,A(")"),T)}function oe(e){return"var"==e?V(Z,A(";"),le):";"==e?V(le):"variable"==e?V(ce):M($,A(";"),le)}function ce(e,t){return"in"==t||"of"==t?(j.marked="keyword",V($)):V(S,le)}function le(e,t){return";"==e?V(ue):"in"==t||"of"==t?(j.marked="keyword",V($)):M($,A(";"),ue)}function ue(e){")"!=e&&V($)}function fe(e,t){return"*"==t?(j.marked="keyword",V(fe)):"variable"==e?(r(t),V(fe)):"("==e?V(E,I(")"),L(se,")"),T,C,z):void 0}function se(e){return"spread"==e?V(se):M(ee,X)}function de(e,t){if("variable"==e)return r(t),V(pe)}function pe(e,t){return"extends"==t?V($,pe):"{"==e?V(I("}"),ve,T):void 0}function ve(e,t){return"variable"==e||"keyword"==j.style?(j.marked="property","get"==t||"set"==t?V(me,fe,ve):V(fe,ve)):"*"==t?(j.marked="keyword",V(ve)):";"==e?V(ve):"}"==e?V():void 0}function me(e){return"variable"!=e?M():(j.marked="property",V())}function ye(e,t){return"string"==e?V(C):"variable"==e?(r(t),V(he)):void 0}function be(e,t){return"*"==t?(j.marked="keyword",V(he,A(";"))):"default"==t?(j.marked="keyword",V($,A(";"))):M(C)}function ke(e){return"string"==e?V():M(xe,he)}function xe(e,t){return"{"==e?Q(xe,"}"):("variable"==e&&r(t),V())}function he(e,t){if("from"==t)return j.marked="keyword",V($)}function ge(e){return"]"==e?V():M(q,we)}function we(e){return"for"==e?M(je,A("]")):","==e?V(L(q,"]")):M(L(q,"]"))}function je(e){return"for"==e?V(ie,je):"if"==e?V($,je):void 0}return T.lex=!0,{startState:function(e){var t={tokenize:y,lastType:"sof",cc:[],lexical:new g((e||0)-u,0,"block",!1),localVars:l.localVars,context:l.localVars&&{vars:l.localVars},indented:0};return l.globalVars&&"object"==typeof l.globalVars&&(t.globalVars=l.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),i(e,t)),t.tokenize!=b&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=a&&"--"!=a?n:"incdec",function(e,t,r,n,a){var i=e.cc;for(j.state=e,j.stream=a,j.marked=null,j.cc=i,j.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():c?$:C)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return j.marked?j.marked:"variable"==r&&w(e,n)?"variable-2":t}}(t,r,n,a,e))},indent:function(e,t){if(e.tokenize==b)return Me.Pass;if(e.tokenize!=y)return 0;var r=t&&t.charAt(0),n=e.lexical;if(!/^\s*else\b/.test(t))for(var a=e.cc.length-1;0<=a;--a){var i=e.cc[a];if(i==T)n=n.prev;else if(i!=ae)break}"stat"==n.type&&"}"==r&&(n=n.prev),f&&")"==n.type&&"stat"==n.prev.type&&(n=n.prev);var o=n.type,c=r==o;return"vardef"==o?n.indented+("operator"==e.lastType||","==e.lastType?n.info+1:0):"form"==o&&"{"==r?n.indented:"form"==o?n.indented+u:"stat"==o?n.indented+("operator"==e.lastType||","==e.lastType?f||u:0):"switch"!=n.info||c||0==l.doubleIndentSwitch?n.align?n.column+(c?0:1):n.indented+(c?0:u):n.indented+(/^(?:case|default)\b/.test(t)?u:2*u)},electricChars:":{}",blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",lineComment:c?null:"//",fold:"brace",helperType:c?"json":"javascript",jsonldMode:o,jsonMode:c}}),Me.registerHelper("wordChars","javascript",/[\\w$]/),Me.defineMIME("text/javascript","javascript"),Me.defineMIME("text/ecmascript","javascript"),Me.defineMIME("application/javascript","javascript"),Me.defineMIME("application/x-javascript","javascript"),Me.defineMIME("application/ecmascript","javascript"),Me.defineMIME("application/json",{name:"javascript",json:!0}),Me.defineMIME("application/x-json",{name:"javascript",json:!0}),Me.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Me.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Me.defineMIME("application/typescript",{name:"javascript",typescript:!0})});